import{j as e}from"./jsx-runtime.B8R7zBj2.js";import{r as l,R as v}from"./index.GM20xmA1.js";import{b as C,a as m}from"./url-builder.CA2d8hgU.js";import"./_commonjsHelpers.D6-XlEtG.js";function k({title:s,titleId:a,...t},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},t),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const $=l.forwardRef(k),b=({isCollapsed:s,onToggle:a,title:t,children:n,className:d=""})=>e.jsxs("div",{className:d,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),a()},className:"p-1 hover:bg-gray-100 rounded-md",children:e.jsx("div",{className:`transition-transform duration-150 ${s?"":"rotate-180"}`,children:e.jsx($,{className:"h-3 w-3 text-gray-500"})})}),typeof t=="string"?e.jsx("button",{onClick:h=>{h.stopPropagation(),a()},className:"flex-grow flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md",children:t}):t]}),e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${s?"h-0":"h-auto"}`,children:n})]}),U=(s,a)=>{if(!a)return y(s);if(a&&["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","TRACE","CONNECT"].includes(a.toUpperCase())){if(a.toUpperCase()==="GET")return"bg-blue-50 text-blue-600";if(a.toUpperCase()==="POST")return"bg-green-50 text-green-600";if(a.toUpperCase()==="PUT")return"bg-yellow-50 text-yellow-600";if(a.toUpperCase()==="DELETE")return"bg-red-50 text-red-600";if(a.toUpperCase()==="PATCH")return"bg-purple-50 text-purple-600";if(a.toUpperCase()==="HEAD")return"bg-gray-50 text-gray-600";if(a.toUpperCase()==="OPTIONS")return"bg-orange-50 text-orange-600"}return y(s)},N=({messages:s,decodedCurrentPath:a})=>e.jsx("ul",{className:"space-y-0.5 border-l border-gray-200/80 ml-[9px] pl-4",children:s.map(t=>e.jsx("li",{"data-active":a===t.href,children:e.jsxs("a",{href:t.href,className:`flex items-center justify-between px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${a.includes(t.href)?"bg-purple-100 ":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate",children:t.data?.sidebar?.label||t.data.name}),e.jsx("span",{className:`ml-2 text-[10px]  flex items-center gap-1 font-medium px-2 uppercase py-0.5 rounded ${U(t.collection,t.data?.sidebar?.badge)}`,children:t.data?.sidebar?.badge||E(t.collection)})]})},t.id))}),w="EventCatalog:catalogSidebarCollapsedGroups",L=300,y=s=>s==="commands"?"bg-blue-50 text-blue-600":s==="queries"?"bg-green-50 text-green-600":s==="events"?"bg-orange-50 text-orange-600":"text-gray-600",E=s=>s==="commands"?"Command":s==="queries"?"Query":s==="events"?"Event":s.slice(0,s.length-1).toUpperCase(),A=v.memo(({searchTerm:s})=>e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2",children:['No results found for "',s,'"']}),e.jsxs("div",{className:"text-gray-400 text-xs",children:["Try:",e.jsxs("ul",{className:"mt-2 space-y-1 text-left list-disc pl-4",children:[e.jsx("li",{children:"Checking for typos"}),e.jsx("li",{children:"Using fewer keywords"}),e.jsx("li",{children:"Using more general terms"})]})]})]})),R=v.memo(({item:s,decodedCurrentPath:a,collapsedGroups:t,toggleGroupCollapse:n})=>e.jsx(b,{isCollapsed:t[s.href],onToggle:()=>n(s.href),title:e.jsxs("button",{onClick:d=>{d.stopPropagation(),n(s.href)},className:"flex justify-between items-center pl-2 w-full text-xs",children:[e.jsx("span",{className:"truncate text-xs font-bold",children:s.label}),e.jsx("span",{className:"text-purple-600 ml-2 text-[10px] font-medium bg-purple-50 px-2 py-0.5 rounded",children:"SERVICE"})]}),children:e.jsxs("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-3 ml-[9px] mt-1",children:[e.jsx("a",{href:`${s.href}`,className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${a===s.href?"bg-purple-100":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Overview"})}),e.jsx("a",{href:C("/architecture/docs/messages",{serviceName:s.name,serviceId:s.id}),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${window.location.href.includes(`serviceId=${s.id}`)?"bg-purple-100":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate flex items-center gap-1",children:"Architecture"})}),s.specifications&&s.specifications.asyncapiPath&&e.jsxs("a",{href:m(`/docs/services/${s.id}/${s.version}/asyncapi`),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md flex justify-between ${window.location.href.includes(`docs/services/${s.id}/${s.version}/asyncapi`)?"bg-purple-100":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate flex items-center gap-1",children:"AsyncAPI specification"}),e.jsx("span",{className:"text-purple-600 ml-2 text-[10px] uppercase font-medium bg-gray-50 px-4 py-0.5 rounded",children:e.jsx("img",{src:m("/icons/asyncapi.svg",!0),className:"w-4 h-4"})})]}),s.specifications&&s.specifications.openapiPath&&e.jsxs("a",{href:m(`/docs/services/${s.id}/${s.version}/spec`),className:`items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md flex justify-between ${window.location.href.includes(`docs/services/${s.id}/${s.version}/spec`)?"bg-purple-100":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate flex items-center gap-1",children:"OpenAPI specification"}),e.jsx("span",{className:"text-green-600 ml-2 text-[10px] uppercase font-medium bg-gray-50 px-4 py-0.5 rounded",children:e.jsx("img",{src:m("/icons/openapi.svg",!0),className:"w-4 h-4"})})]}),e.jsx(b,{isCollapsed:t[`${s.href}-receives`],onToggle:()=>n(`${s.href}-receives`),title:e.jsxs("button",{onClick:d=>{d.stopPropagation(),n(`${s.href}-receives`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Receives messages (",s.receives.length,")"]}),children:e.jsx(N,{messages:s.receives,decodedCurrentPath:a})}),e.jsx(b,{isCollapsed:t[`${s.href}-sends`],onToggle:()=>n(`${s.href}-sends`),title:e.jsxs("button",{onClick:d=>{d.stopPropagation(),n(`${s.href}-sends`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Sends messages (",s.sends.length,")"]}),children:e.jsx(N,{messages:s.sends,decodedCurrentPath:a})})]})})),D=({resources:s,currentPath:a})=>{const t=l.useRef(null),[n]=l.useState(s),[d,h]=l.useState(""),[p,S]=l.useState(""),[T,I]=l.useState(!1),[u,j]=l.useState(()=>{if(typeof window<"u"){const r=window.localStorage.getItem(w);return I(!0),r?JSON.parse(r):{}}return{}}),x=window.location.pathname;l.useEffect(()=>{const r=setTimeout(()=>{S(d.toLowerCase())},L);return()=>clearTimeout(r)},[d]);const o=l.useMemo(()=>{if(!p)return n;const r=c=>c.label.toLowerCase().includes(p),i=c=>c.filter(f=>f.data.name.toLowerCase().includes(p));return{domains:n.domains?.filter(r)||[],services:n.services?.map(c=>({...c,sends:i(c.sends),receives:i(c.receives),isVisible:r(c)||c.sends.some(f=>f.data.name.toLowerCase().includes(p))||c.receives.some(f=>f.data.name.toLowerCase().includes(p))})).filter(c=>c.isVisible)||[],flows:n.flows?.filter(r)||[],messagesNotInService:n.messagesNotInService?.filter(c=>c.label.toLowerCase().includes(p))||[]}},[n,p]);l.useEffect(()=>{if(p){const r={...u};Object.keys(r).forEach(i=>{r[i]=!1}),j(r)}},[p]),l.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem(w,JSON.stringify(u))},[u]),l.useEffect(()=>{const r=document.querySelector('[data-active="true"]');r&&r.scrollIntoView({behavior:"smooth",block:"center"})},[]);const g=l.useCallback(r=>{j(i=>({...i,[r]:!i[r]}))},[]),O=l.useCallback(r=>{h(r.target.value)},[]);if(!T)return null;const P=p&&!o.domains?.length&&!o.services?.length&&!o.flows?.length&&!o.messagesNotInService?.length;return e.jsxs("nav",{ref:t,className:"space-y-4 text-gray-800 px-3 py-4",children:[e.jsx("input",{type:"text",value:d,onChange:O,placeholder:"Quick search...",className:"w-full p-2 text-sm rounded-md border border-gray-200 h-[30px]"}),e.jsx("div",{className:"space-y-2 divide-y divide-gray-200/80",children:P?e.jsx(A,{searchTerm:p}):e.jsxs(e.Fragment,{children:[o.domains&&e.jsx("div",{children:e.jsx("ul",{className:"space-y-2",children:o.domains.map(r=>e.jsxs("li",{className:"space-y-0","data-active":x===r.href,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),g(r.href)},className:"p-1 hover:bg-gray-100 rounded-md",children:e.jsx("div",{className:`transition-transform duration-150 ${u[r.href]?"":"rotate-180"}`,children:e.jsx($,{className:"h-3 w-3 text-gray-500"})})}),e.jsxs("button",{onClick:i=>{i.stopPropagation(),g(r.href)},className:`flex-grow flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md ${x===r.href}`,children:[e.jsx("span",{className:"truncate",children:r.label}),e.jsx("span",{className:"text-yellow-600 ml-2 text-[10px] font-medium bg-yellow-50 px-2 py-0.5 rounded",children:"DOMAIN"})]})]}),e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${u[r.href]?"h-0":"h-auto"}`,children:e.jsxs("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-4 ml-[9px] mt-1",children:[e.jsx("a",{href:`${r.href}`,className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${x===r.href?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Overview"})}),e.jsx("a",{href:C("/architecture/docs/services",{serviceIds:r.services.map(i=>i.data.id).join(","),domainId:r.id,domainName:r.name}),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${window.location.href.includes(`domainId=${r.id}`)?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Architecture"})}),e.jsx("a",{href:m(`/docs/domains/${r.id}/language`),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${x.includes(`/docs/domains/${r.id}/language`)?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Ubiquitous Language"})})]})})]},r.href))})}),o.services&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx("ul",{className:"space-y-4",children:o.services.map(r=>e.jsx(R,{item:r,decodedCurrentPath:x,collapsedGroups:u,toggleGroupCollapse:g},r.href))})}),o.messagesNotInService&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx("ul",{className:"space-y-4",children:o.messagesNotInService.map(r=>e.jsx("li",{className:"space-y-0","data-active":x===r.href,children:e.jsxs("a",{href:r.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md ${x===r.href?"bg-purple-100 text-purple-900":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate",children:r.label}),e.jsx("span",{className:`ml-2 text-[10px] font-medium px-2 uppercase py-0.5 rounded ${y(r.collection)}`,children:E(r.collection)})]})},r.href))})}),o.flows&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx("ul",{className:"space-y-4",children:o.flows.map(r=>e.jsx("li",{className:"space-y-0","data-active":x===r.href,children:e.jsxs("a",{href:r.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md ${x===r.href?"bg-cyan-100 text-cyan-900":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate",children:r.label}),e.jsx("span",{className:"text-cyan-600 ml-2 text-[10px] font-medium bg-cyan-50 px-2 py-0.5 rounded",children:"FLOW"})]})},r.href))})})]})})]})},F=v.memo(D);export{F as default};
