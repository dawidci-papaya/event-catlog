import{j as e}from"./jsx-runtime.B8R7zBj2.js";import{r as o}from"./index.GM20xmA1.js";import{c as M,a as $,f as F,b as f,d as C,g as I,e as O,h as P,i as A,j as H,k as U,l as q,m as T}from"./MessageTableColumns.CPq4URvR.js";import{a as d}from"./url-builder.CA2d8hgU.js";import{b as k,F as E,a as B,c as S}from"./ServerIcon.DGKp2rnz.js";import{c as K}from"./createLucideIcon.UmlluPcl.js";import{F as D,s as V}from"./index.BB5iycHi.js";import"./_commonjsHelpers.D6-XlEtG.js";function L({title:a,titleId:s,...n},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),a?o.createElement("title",{id:s},a):null,o.createElement("path",{fillRule:"evenodd",d:"M2.5 3A1.5 1.5 0 0 0 1 4.5v4A1.5 1.5 0 0 0 2.5 10h6A1.5 1.5 0 0 0 10 8.5v-4A1.5 1.5 0 0 0 8.5 3h-6Zm11 2A1.5 1.5 0 0 0 12 6.5v7a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 17.5 5h-4Zm-10 7A1.5 1.5 0 0 0 2 13.5v2A1.5 1.5 0 0 0 3.5 17h6a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 12h-6Z",clipRule:"evenodd"}))}const Z=o.forwardRef(L);function z({title:a,titleId:s,...n},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},n),a?o.createElement("title",{id:s},a):null,o.createElement("path",{d:"M4.632 3.533A2 2 0 0 1 6.577 2h6.846a2 2 0 0 1 1.945 1.533l1.976 8.234A3.489 3.489 0 0 0 16 11.5H4c-.476 0-.93.095-1.344.267l1.976-8.234Z"}),o.createElement("path",{fillRule:"evenodd",d:"M4 13a2 2 0 1 0 0 4h12a2 2 0 1 0 0-4H4Zm11.24 2a.75.75 0 0 1 .75-.75H16a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75V15Zm-2.25-.75a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75H13a.75.75 0 0 0 .75-.75V15a.75.75 0 0 0-.75-.75h-.01Z",clipRule:"evenodd"}))}const Q=o.forwardRef(z);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function R(a,s){return a?_(a)?o.createElement(a,s):a:null}function _(a){return W(a)||typeof a=="function"||J(a)}function W(a){return typeof a=="function"&&(()=>{const s=Object.getPrototypeOf(a);return s.prototype&&s.prototype.isReactComponent})()}function J(a){return typeof a=="object"&&typeof a.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(a.$$typeof.description)}function X(a){const s={state:{},onStateChange:()=>{},renderFallbackValue:null,...a},[n]=o.useState(()=>({current:M(s)})),[i,r]=o.useState(()=>n.current.initialState);return n.current.setOptions(c=>({...c,...a,state:{...i,...a.state},onStateChange:t=>{r(t),a.onStateChange==null||a.onStateChange(t)}})),n.current}const Y=({value:a,onChange:s,debounce:n=500,...i})=>{const[r,c]=o.useState(a);return o.useEffect(()=>{c(a)},[a]),o.useEffect(()=>{const t=setTimeout(()=>{s(r)},n);return()=>clearTimeout(t)},[r]),e.jsx("input",{...i,value:r,onChange:t=>c(t.target.value)})},v=$(),ee=()=>[v.accessor("data.name",{id:"name",header:()=>e.jsx("span",{children:"Name"}),cell:a=>{const s=a.row.original;return o.useMemo(()=>s.collection.slice(0,-1),[s.collection]),e.jsx("div",{className:" group ",children:e.jsx("a",{href:d(`/docs/${s.collection}/${s.data.id}`),className:"group-hover:text-gray-500 flex space-x-1 items-center",children:e.jsx("div",{className:"flex items-center  rounded-md group-hover:border-gray-400",children:e.jsx("span",{className:"flex items-center",children:e.jsx("span",{className:"flex flex-col leading-none px-2 group-hover:underline group-hover:text-primary font-light",children:e.jsx("span",{className:"font-semibold",children:s.data.name})})})})})})},meta:{filterVariant:"name",filteredItemHasVersion:!1},filterFn:F}),v.accessor("data.ownedEvents",{header:()=>e.jsx("span",{children:"Owned events"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedEvents"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/80 text-left italic",children:"User owns no events"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," event",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-orange-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(k,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedEvents")}),v.accessor("data.ownedCommands",{header:()=>e.jsx("span",{children:"Owned commands"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedCommands"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/60 text-left italic",children:"User owns no commands"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," command",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-blue-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedCommands")}),v.accessor("data.ownedQueries",{header:()=>e.jsx("span",{children:"Owned queries"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedQueries"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/60 text-left italic",children:"User owns no queries"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," query",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md h-full",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-green-500 flex rounded-tl rounded-bl p-1 h-full",children:e.jsx(B,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedCommands")}),v.accessor("data.ownedServices",{header:()=>e.jsx("span",{children:"Owned Services"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedServices"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/80 text-left italic",children:"User owns no services"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," service",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-green-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(S,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedServices")}),v.accessor("data.associatedTeams",{header:()=>e.jsx("span",{children:"Teams"}),meta:{filterVariant:"collection",collectionFilterKey:"associatedTeams",filteredItemHasVersion:!1},cell:a=>{const s=a.getValue(),n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return s?.length===0||!s?e.jsx("div",{className:"font-light text-sm text-gray-400/80 text-left italic",children:"User is not associated with any teams"}):e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," team",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/teams/${t.data.id}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-pink-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(G,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"leading-none px-2 group-hover:underline ",children:t.data.name})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("associatedTeams")}),v.accessor("data.name",{header:()=>e.jsx("span",{}),cell:a=>{const s=a.row.original;return e.jsx("a",{className:"hover:text-primary hover:underline px-4 font-light",href:d(`/docs/${s.collection}/${s.data.id}`),children:"View →"})},id:"actions",meta:{showFilter:!1}})],j=$(),se=()=>[j.accessor("data.name",{id:"name",header:()=>e.jsx("span",{children:"Service"}),cell:a=>{const s=a.row.original,n="pink";return e.jsx("div",{className:"group font-light",children:e.jsx("a",{href:d(`/docs/${s.collection}/${s.data.id}/${s.data.version}`),className:`group-hover:text-${n}-500 flex space-x-1 items-center`,children:e.jsx("div",{className:`flex items-center border border-gray-300 shadow-sm rounded-md group-hover:border-${n}-400`,children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`bg-${n}-500 group-hover:bg-${n}-600 h-full rounded-tl rounded-bl p-1`,children:e.jsx(S,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline group-hover:text-primary",children:[s.data.name," (v",s.data.version,")"]})]})})})})},meta:{filterVariant:"name"},filterFn:F}),j.accessor("data.summary",{id:"summary",header:()=>"Summary",cell:a=>e.jsx("span",{className:"font-light ",children:a.renderValue()}),footer:a=>a.column.id,meta:{showFilter:!1,className:"max-w-md"}}),j.accessor("data.receives",{header:()=>e.jsx("span",{children:"Receives"}),meta:{filterVariant:"collection",collectionFilterKey:"receives"},cell:a=>{const s=a.getValue()||[],n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i),t=o.useMemo(()=>s?.map(l=>{const g=l.collection.slice(0,-1);return{...l,...I(g)}})||[],[s]);return s?.length===0||!s?e.jsx("div",{className:"text-sm text-gray-400/80 text-left italic",children:"Service receives no messages."}):e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," message",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:t.map((l,g)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${l.collection}/${l.data.id}/${l.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`bg-${l.color}-500 h-full rounded-tl rounded-bl p-1`,children:e.jsx(l.Icon,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[l.data.name," (v",l.data.version,")"]})]})})})},`${l.data.id}-${g}`))})]})},filterFn:f("receives")}),j.accessor("data.sends",{header:()=>e.jsx("span",{children:"Sends"}),meta:{filterVariant:"collection",collectionFilterKey:"sends"},cell:a=>{const s=a.getValue()||[],n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);if(s?.length===0||!s)return e.jsx("div",{className:"text-sm text-gray-400/80 text-left italic",children:"Service sends no messages."});const t=o.useMemo(()=>s?.map(l=>{const g=l.collection.slice(0,-1);return{...l,...I(g)}})||[],[s]);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," message",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:t.map((l,g)=>e.jsx("li",{className:"py-1 group font-light",children:e.jsx("a",{href:d(`/docs/${l.collection}/${l.data.id}/${l.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`bg-${l.color}-500 h-full rounded-tl rounded-bl p-1`,children:e.jsx(l.Icon,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[l.data.name," (v",l.data.version,")"]})]})})})},`${l.data.id}-${g}`))})]})},filterFn:f("sends")}),C(j),j.accessor("data.name",{header:()=>e.jsx("span",{}),cell:a=>{const s=a.row.original;return e.jsx("a",{className:"hover:text-primary hover:underline px-4 font-light",href:d(`/visualiser/${s.collection}/${s.data.id}/${s.data.version}`),children:"Visualiser →"})},id:"actions",meta:{showFilter:!1}})],y=$(),ae=()=>[y.accessor("data.name",{id:"name",header:()=>e.jsx("span",{children:"Domain"}),cell:a=>{const s=a.row.original,n="yellow";return e.jsx("div",{className:" group ",children:e.jsx("a",{href:d(`/docs/${s.collection}/${s.data.id}/${s.data.version}`),className:`group-hover:text-${n}-500 flex space-x-1 items-center`,children:e.jsx("div",{className:`flex items-center border border-gray-300 shadow-sm rounded-md group-hover:border-${n}-400`,children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`bg-${n}-500 group-hover:bg-${n}-600 h-full rounded-tl rounded-bl p-1`,children:e.jsx(Z,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline group-hover:text-primary font-light",children:[s.data.name," (v",s.data.version,")"]})]})})})})},footer:a=>a.column.id,meta:{filterVariant:"name"},filterFn:F}),y.accessor("data.summary",{id:"summary",header:()=>"Summary",cell:a=>e.jsx("span",{className:"font-light ",children:a.renderValue()}),footer:a=>a.column.id,meta:{showFilter:!1,className:"max-w-md"}}),y.accessor("data.services",{header:()=>e.jsx("span",{children:"Services"}),meta:{filterVariant:"collection",collectionFilterKey:"services"},cell:a=>{const s=a.getValue();return s?.length===0||!s?e.jsx("div",{className:"text-sm text-gray-400/80 text-left italic",children:"Domain has no services."}):e.jsx("ul",{children:s.map(n=>e.jsx("li",{className:"py-1 group ",children:e.jsx("a",{href:d(`/docs/${n.collection}/${n.data.id}/${n.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-pink-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(Q,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline font-light  ",children:[n.data.name," (v",n.data.version,")"]})]})})})},n.data.id))})},filterFn:f("services")}),C(y),y.accessor("data.name",{header:()=>e.jsx("span",{}),cell:a=>{const s=a.row.original;return e.jsx("a",{className:"hover:text-primary hover:underline px-4 font-light",href:d(`/visualiser/${s.collection}/${s.data.id}/${s.data.version}`),children:"Visualiser →"})},id:"actions",meta:{showFilter:!1}})],b=$(),te=()=>[b.accessor("data.name",{id:"name",header:()=>e.jsx("span",{children:"Flow"}),cell:a=>{const s=a.row.original,n="teal";return e.jsx("div",{className:" group ",children:e.jsx("a",{href:d(`/docs/${s.collection}/${s.data.id}/${s.data.version}`),className:`group-hover:text-${n}-500 flex space-x-1 items-center`,children:e.jsx("div",{className:`flex items-center border border-gray-300 shadow-sm rounded-md group-hover:border-${n}-400`,children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`bg-${n}-500 group-hover:bg-${n}-600 h-full rounded-tl rounded-bl p-1`,children:e.jsx(D,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline group-hover:text-primary font-light",children:[s.data.name," (v",s.data.version,")"]})]})})})})},footer:a=>a.column.id,meta:{filterVariant:"name"},filterFn:F}),b.accessor("data.version",{header:()=>e.jsx("span",{children:"Version"}),cell:a=>{const s=a.row.original;return e.jsx("div",{className:"text-left font-light",children:`v${a.getValue()} ${s.data.latestVersion===s.data.version?"(latest)":""}`})},footer:a=>a.column.id}),b.accessor("data.summary",{id:"summary",header:()=>"Summary",cell:a=>e.jsx("span",{className:"font-light ",children:a.renderValue()}),footer:a=>a.column.id,meta:{showFilter:!1,className:"max-w-md"}}),C(b),b.accessor("data.name",{header:()=>e.jsx("span",{}),cell:a=>{const s=a.row.original;return e.jsx("a",{className:"hover:text-primary hover:underline px-4 font-light",href:d(`/visualiser/${s.collection}/${s.data.id}/${s.data.version}`),children:"Visualiser →"})},id:"actions",meta:{showFilter:!1}})],N=$(),ne=()=>[N.accessor("data.name",{id:"name",header:()=>e.jsx("span",{children:"Name"}),cell:a=>{const s=a.row.original;return o.useMemo(()=>s.collection.slice(0,-1),[s.collection]),e.jsx("div",{className:" group ",children:e.jsx("a",{href:d(`/docs/${s.collection}/${s.data.id}`),className:"group-hover:text-pink-500 flex space-x-1 items-center",children:e.jsx("div",{className:"flex items-center  rounded-md group-hover:border-pink-400",children:e.jsx("span",{className:"flex items-center",children:e.jsx("span",{className:"flex flex-col leading-none px-2 group-hover:underline group-hover:text-primary font-light",children:e.jsx("span",{className:"font-semibold",children:s.data.name})})})})})})},meta:{filterVariant:"name",filteredItemHasVersion:!1},filterFn:F}),N.accessor("data.ownedEvents",{header:()=>e.jsx("span",{children:"Owned events"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedEvents"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/80 text-left italic",children:"Team owns no events"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," event",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-orange-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(k,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedEvents")}),N.accessor("data.ownedCommands",{header:()=>e.jsx("span",{children:"Owned commands"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedCommands"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/60 text-left italic",children:"Team owns no commands"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," command",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-blue-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedCommands")}),N.accessor("data.ownedQueries",{header:()=>e.jsx("span",{children:"Owned queries"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedQueries"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/60 text-left italic",children:"Team owns no queries"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," query",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-blue-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedCommands")}),N.accessor("data.ownedServices",{header:()=>e.jsx("span",{children:"Owned Services"}),meta:{filterVariant:"collection",collectionFilterKey:"ownedServices"},cell:a=>{const s=a.getValue();if(s?.length===0||!s)return e.jsx("div",{className:"font-light text-sm text-gray-400/80 text-left italic",children:"Team owns no services"});const n=s?.length>10,i=n?s?.length<10:!0,[r,c]=o.useState(i);return e.jsxs("div",{children:[n&&e.jsxs("button",{onClick:()=>c(!r),className:"mb-2 text-sm text-gray-600 hover:text-gray-900",children:[r?"▼":"▶"," ",s.length," service",s.length!==1?"s":""]}),r&&e.jsx("ul",{children:s.map((t,l)=>e.jsx("li",{className:"py-1 group font-light ",children:e.jsx("a",{href:d(`/docs/${t.collection}/${t.data.id}/${t.data.version}`),className:"group-hover:text-primary flex space-x-1 items-center ",children:e.jsx("div",{className:"flex items-center border border-gray-300 shadow-sm rounded-md",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"bg-green-500 h-full rounded-tl rounded-bl p-1",children:e.jsx(S,{className:"h-4 w-4 text-white"})}),e.jsxs("span",{className:"leading-none px-2 group-hover:underline ",children:[t.data.name," (v",t.data.version,")"]})]})})})},`${t.data.id}-${l}`))})]})},footer:a=>a.column.id,filterFn:f("ownedServices")}),N.accessor("data.name",{header:()=>e.jsx("span",{}),cell:a=>{const s=a.row.original;return e.jsx("a",{className:"hover:text-primary hover:underline px-4 font-light",href:d(`/docs/${s.collection}/${s.data.id}`),children:"View →"})},id:"actions",meta:{showFilter:!1}})],re=a=>{switch(a){case"events":case"commands":case"queries":return O();case"services":return se();case"domains":return ae();case"flows":return te();case"users":return ee();case"teams":return ne();default:return[]}};function le(a,s){const n=V.coerce(a),i=V.coerce(s);return n!=null&&i!=null?V.eq(n,i):a===s}const pe=({data:a,collection:s,mode:n="simple",checkboxLatestId:i})=>{const[r,c]=o.useState(a),[t,l]=o.useState([]);o.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("id");p&&l([{id:"name",value:p}])},[]);const[g,w]=o.useState(!0);o.useEffect(()=>{const m=document.getElementById(i);function p(u){w(u.target.checked)}return m?.addEventListener("change",p),()=>m?.removeEventListener("change",p)},[i]);const x=o.useMemo(()=>re(s),[s]),h=X({data:r,columns:x,onColumnFiltersChange:l,getCoreRowModel:T(),getFilteredRowModel:q(),getFacetedRowModel:U(),getFacetedUniqueValues:H(),getFacetedMinMaxValues:A(),getPaginationRowModel:P(),state:{columnFilters:t,globalFilter:g},onGlobalFilterChange:w,globalFilterFn:(m,p,u)=>u?le(m.original.data.version,m.original.data.latestVersion):!0});return e.jsxs("div",{children:[e.jsx("div",{className:" bg-gray-100/20 rounded-md border-2 border-gray-200 shadow-sm ",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-md ",children:[e.jsx("thead",{className:"bg-gray-200/50",children:h.getHeaderGroups().map((m,p)=>e.jsx("tr",{className:"rounded-tl-lg",children:m.headers.map(u=>e.jsx("th",{className:"pl-4 pr-3 text-left text-sm font-semibold text-gray-800 sm:pl-0  ",children:e.jsxs("div",{className:"flex flex-col justify-start px-2 py-2 space-y-2",children:[e.jsx("div",{className:"text-md",children:u.isPlaceholder?null:R(u.column.columnDef.header,u.getContext())}),e.jsxs("div",{className:"",children:[u.column.columnDef.meta?.showFilter!==!1&&e.jsx(ie,{column:u.column}),u.column.columnDef.meta?.showFilter==!1&&e.jsx("div",{className:"h-10"})]})]})},`${u.id}`))},`${m}-${p}`))}),e.jsx("tbody",{className:"divide-y divide-gray-300 ",children:h.getRowModel().rows.map((m,p)=>e.jsx("tr",{children:m.getVisibleCells().map(u=>e.jsx("td",{className:` py-4 pl-4 pr-3 text-sm font-medium text-gray-900  ${u.column.columnDef.meta?.className}`,children:R(u.column.columnDef.cell,u.getContext())},u.id))},`${m.id}-${p}`))})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"h-8"}),e.jsxs("div",{className:"flex items-center gap-2 justify-end px-4  ",children:[e.jsx("button",{className:"relative inline-flex items-center rounded-l-md bg-white px-2 py-1 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:()=>h.setPageIndex(0),disabled:!h.getCanPreviousPage(),children:"<<"}),e.jsx("button",{className:"relative inline-flex items-center  bg-white px-2 py-1 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:()=>h.previousPage(),disabled:!h.getCanPreviousPage(),children:"<"}),e.jsx("button",{className:"relative inline-flex items-center  bg-white px-2 py-1 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:()=>h.nextPage(),disabled:!h.getCanNextPage(),children:">"}),e.jsx("button",{className:"relative inline-flex items-center rounded-r-md bg-white px-2 py-1 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-10",onClick:()=>h.setPageIndex(h.getPageCount()-1),disabled:!h.getCanNextPage(),children:">>"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{children:"Page"}),e.jsxs("strong",{children:[h.getState().pagination.pageIndex+1," of ",h.getPageCount()]})]}),e.jsxs("span",{className:"flex items-center gap-1",children:["| Go to page:",e.jsx("input",{type:"number",defaultValue:h.getState().pagination.pageIndex+1,onChange:m=>{const p=m.target.value?Number(m.target.value)-1:0;h.setPageIndex(p)},className:"border border-gray-300 p-1 rounded w-16"})]}),e.jsx("select",{value:h.getState().pagination.pageSize,onChange:m=>{h.setPageSize(Number(m.target.value))},children:[10,20,30,40,50].map(m=>e.jsxs("option",{value:m,children:["Show ",m]},m))})]})]})]})};function ie({column:a}){const{filterVariant:s,collectionFilterKey:n,filteredItemHasVersion:i=!0}=a.columnDef.meta??{},r=a.getFilterValue(),c=o.useMemo(()=>{if(s==="collection"&&n){const g=a.getFacetedRowModel().rows.map(x=>x.original.data?.[n]??[]).flat().map(x=>i?`${x?.data.name} (v${x?.data.version})`:`${x?.data.name}`);return Array.from(new Set(g)).sort().slice(0,2e3)}if(s==="name"){const g=a.getFacetedRowModel().rows.map(x=>x.original).flat().map(x=>i?`${x.data.name} (v${x.data.version})`:`${x.data.name}`);return Array.from(new Set(g)).sort().slice(0,2e3)}if(s==="badges"){const t=a.getFacetedUniqueValues().keys(),g=Array.from(t).flat().filter(x=>!!x).map(x=>x.content);return Array.from(new Set(g)).sort().slice(0,2e3)}return Array.from(a.getFacetedUniqueValues().keys()).sort().slice(0,2e3)},[a.getFacetedUniqueValues(),s]);return e.jsxs("div",{children:[e.jsx("datalist",{id:a.id+"list",children:c.map((t,l)=>e.jsx("option",{value:t},`${t}-${l}`))}),e.jsx(Y,{type:"text",value:r??"",onChange:t=>a.setFilterValue(t),placeholder:`Search... ${a?.columnDef?.meta?.filterVariant?"":`(${a.getFacetedUniqueValues().size})`}`,className:"w-full p-2 border shadow rounded",list:a.id+"list"}),e.jsx("div",{className:"h-1"})]})}export{pe as Table};
