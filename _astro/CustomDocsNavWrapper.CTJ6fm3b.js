import{j as e}from"./jsx-runtime.B8R7zBj2.js";import{R as j,r as l}from"./index.GM20xmA1.js";import{a as v}from"./url-builder.CA2d8hgU.js";import"./_commonjsHelpers.D6-XlEtG.js";const y=({item:s,currentPath:x,parentId:h,itemIndex:g,collapsedGroups:n,toggleGroupCollapse:f})=>{const u=s.items&&s.items.length>0,d=`${h}-${g}`;if(u&&s.items)return e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded-md flex-shrink-0",onClick:c=>{c.stopPropagation(),f(`nested-${d}`)},children:e.jsx("div",{className:`transition-transform duration-150 ${n[`nested-${d}`]?"":"rotate-180"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon",className:"h-3 w-3 text-gray-500",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})})}),e.jsxs("button",{className:"flex items-center px-2 py-1 text-xs font-medium text-gray-700 rounded-md hover:bg-purple-50 min-w-0 flex-1",onClick:c=>{c.stopPropagation(),f(`nested-${d}`)},children:[e.jsx("span",{className:"truncate",children:s.label}),s.badge&&s?.badge?.text&&e.jsx("span",{className:`text-${s.badge.color||"purple"}-600 ml-2 text-[10px] font-medium bg-${s.badge.color||"purple"}-50 px-2 py-0.5 rounded uppercase`,children:s.badge.text})]})]}),e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${n[`nested-${d}`]?"h-0":"h-auto"}`,children:e.jsx("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-4 ml-[9px] mt-1",children:s.items.map((c,p)=>e.jsx(y,{item:c,currentPath:x,parentId:d,itemIndex:p,collapsedGroups:n,toggleGroupCollapse:f},`nested-${d}-${p}`))})})]});const o=s.slug?v(`/docs/custom/${s.slug}`):"#",m=x===o||x.endsWith(`/${s.slug}`);return e.jsxs("a",{href:o,className:`flex items-center px-2 py-1.5 text-xs ${m?"bg-purple-100 text-purple-900 font-medium":"text-gray-600 hover:bg-purple-100"} rounded-md`,"data-active":m,children:[e.jsx("span",{className:"truncate",children:s.label}),s.badge&&s?.badge?.text&&e.jsx("span",{className:`text-${s.badge.color||"purple"}-600 ml-2 text-[10px] font-medium bg-${s.badge.color||"purple"}-50 px-2 py-0.5 rounded uppercase`,children:s.badge.text})]})},S=j.memo(y),k=({searchTerm:s})=>e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2",children:['No results found for "',s,'"']}),e.jsxs("div",{className:"text-gray-400 text-xs",children:["Try:",e.jsxs("ul",{className:"mt-2 space-y-1 text-left list-disc pl-4",children:[e.jsx("li",{children:"Checking for typos"}),e.jsx("li",{children:"Using fewer keywords"}),e.jsx("li",{children:"Using more general terms"})]})]})]}),C=j.memo(k),N="EventCatalog:customDocsSidebarCollapsedGroups",E=300,T=({sidebarItems:s})=>{const x=l.useRef(null),[h,g]=l.useState(""),[n,f]=l.useState(""),[u,d]=l.useState(!1),[o,m]=l.useState(()=>{if(typeof window<"u"){const t=window.localStorage.getItem(N);return d(!0),t?JSON.parse(t):{}}return{}}),c=window.location.pathname;l.useEffect(()=>{const t=setTimeout(()=>{f(h.toLowerCase())},E);return()=>clearTimeout(t)},[h]);const p=l.useMemo(()=>{if(!n)return s;const t=r=>r.toLowerCase().includes(n),a=r=>t(r.label)?!0:r.items&&r.items.length>0?r.items.some(a):!1;return s.map(r=>{if(!r.items)return t(r.label)?r:null;const i=r.items.filter(a);return i.length>0||t(r.label)?{...r,items:i}:null}).filter(Boolean)},[s,n]);l.useEffect(()=>{if(n){const t={...o};Object.keys(t).forEach(a=>{t[a]=!1}),m(t)}},[n]),l.useEffect(()=>{typeof window<"u"&&u&&window.localStorage.setItem(N,JSON.stringify(o))},[o,u]),l.useEffect(()=>{if(u&&s&&s.length>0){const t={...o};s.forEach((a,r)=>{const i=`section-${r}`;a.collapsed!==void 0&&t[i]===void 0&&(t[i]=a.collapsed)}),m(t)}},[s,u]),l.useEffect(()=>{const t=document.querySelector('[data-active="true"]');t&&setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"center"})},300)},[]);const b=l.useCallback(t=>{m(a=>({...a,[t]:!a[t]}))},[]),w=l.useCallback(t=>{g(t.target.value)},[]);if(!u)return null;const $=n&&p.length===0;return console.log("filteredSidebarItems",p),console.log("currentPath",c),e.jsxs("nav",{ref:x,className:"h-full text-gray-800 pt-4 overflow-y-auto",children:[e.jsx("div",{className:"mb-2 px-3 bg-white z-10",children:e.jsx("input",{type:"text",value:h,onChange:w,placeholder:"Quick search...",className:"w-full p-2 px-2 text-sm rounded-md border border-gray-200 h-[30px]"})}),e.jsx("div",{className:"space-y-2 divide-y divide-gray-100/40 pb-4",children:$?e.jsx(C,{searchTerm:n}):p.map((t,a)=>e.jsx("div",{className:"pt-2 pb-2 px-3",children:e.jsxs("div",{className:"space-y-0","data-section":`section-${a}`,children:[t.items?e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded-md flex-shrink-0",onClick:r=>{r.stopPropagation(),b(`section-${a}`)},children:e.jsx("div",{className:`transition-transform duration-150 ${o[`section-${a}`]?"":"rotate-180"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon",className:"h-3 w-3 text-gray-500",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})})}),e.jsxs("button",{className:"flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md hover:bg-purple-50 min-w-0 flex-1",onClick:r=>{r.stopPropagation(),b(`section-${a}`)},children:[e.jsx("span",{className:"truncate",children:t.label}),t.badge&&t?.badge?.text&&e.jsx("span",{className:`text-${t.badge.color||"purple"}-600 ml-2 text-[10px] font-medium bg-${t.badge.color||"purple"}-50 px-2 py-0.5 rounded uppercase`,children:t.badge.text})]})]}):e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"flex-grow flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md",children:[e.jsx("span",{className:"truncate",children:t.label}),e.jsx("span",{className:"text-purple-600 ml-2 text-[10px] font-medium bg-purple-50 px-2 py-0.5 rounded uppercase",children:"Section"})]})}),t.items&&e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${o[`section-${a}`]?"h-0":"h-auto"}`,children:e.jsx("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-4 ml-[9px] mt-1",children:t.items.map((r,i)=>e.jsx(S,{item:r,currentPath:c,parentId:`${a}`,itemIndex:i,collapsedGroups:o,toggleGroupCollapse:b},`item-${a}-${i}`))})}),t.slug&&!t.items&&e.jsx("a",{href:v(`/docs/custom/${t.slug}`),className:`flex items-center px-2 py-1.5 text-xs ${c.endsWith(`/${t.slug}`)?"bg-purple-100 text-purple-900 font-medium":"text-gray-600 hover:bg-purple-100"} rounded-md ml-6`,"data-active":c.endsWith(`/${t.slug}`),children:e.jsx("span",{className:"truncate",children:t.label})})]})},`section-${a}`))})]})},R=j.memo(T);function O(s){return e.jsx(R,{...s})}export{O as default};
